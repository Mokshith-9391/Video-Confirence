{"ast":null,"code":"import axios from\"axios\";import httpStatus from\"http-status\";import{createContext,useContext,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import server from\"../environment\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext({});const client=axios.create({baseURL:\"\".concat(server,\"/api/v1/users\")});export const AuthProvider=_ref=>{let{children}=_ref;const authContext=useContext(AuthContext);const[userData,setUserData]=useState(authContext);const router=useNavigate();const handleRegister=async(name,username,password)=>{try{let request=await client.post(\"/register\",{name:name,username:username,password:password});if(request.status===httpStatus.CREATED){return request.data.message;}}catch(err){throw err;}};const handleLogin=async(username,password)=>{try{let request=await client.post(\"/login\",{username:username,password:password});console.log(username,password);console.log(request.data);if(request.status===httpStatus.OK){localStorage.setItem(\"token\",request.data.token);router(\"/home\");}}catch(err){throw err;}};const getHistoryOfUser=async()=>{try{let request=await client.get(\"/get_all_activity\",{params:{token:localStorage.getItem(\"token\")}});return request.data;}catch(err){throw err;}};const addToUserHistory=async meetingCode=>{try{let request=await client.post(\"/add_to_activity\",{token:localStorage.getItem(\"token\"),meeting_code:meetingCode});return request;}catch(e){throw e;}};const data={userData,setUserData,addToUserHistory,getHistoryOfUser,handleRegister,handleLogin};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:data,children:children});};","map":{"version":3,"names":["axios","httpStatus","createContext","useContext","useState","useNavigate","server","jsx","_jsx","AuthContext","client","create","baseURL","concat","AuthProvider","_ref","children","authContext","userData","setUserData","router","handleRegister","name","username","password","request","post","status","CREATED","data","message","err","handleLogin","console","log","OK","localStorage","setItem","token","getHistoryOfUser","get","params","getItem","addToUserHistory","meetingCode","meeting_code","e","Provider","value"],"sources":["C:/Users/MOKSHITH/OneDrive/Desktop/VIDEO CONFERENCE/frontend/src/contexts/AuthContext.jsx"],"sourcesContent":["import axios from \"axios\";\nimport httpStatus from \"http-status\";\nimport { createContext, useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport server from \"../environment\";\n\n\nexport const AuthContext = createContext({});\n\nconst client = axios.create({\n    baseURL: `${server}/api/v1/users`\n})\n\n\nexport const AuthProvider = ({ children }) => {\n\n    const authContext = useContext(AuthContext);\n\n\n    const [userData, setUserData] = useState(authContext);\n\n\n    const router = useNavigate();\n\n    const handleRegister = async (name, username, password) => {\n        try {\n            let request = await client.post(\"/register\", {\n                name: name,\n                username: username,\n                password: password\n            })\n\n\n            if (request.status === httpStatus.CREATED) {\n                return request.data.message;\n            }\n        } catch (err) {\n            throw err;\n        }\n    }\n\n    const handleLogin = async (username, password) => {\n        try {\n            let request = await client.post(\"/login\", {\n                username: username,\n                password: password\n            });\n\n            console.log(username, password)\n            console.log(request.data)\n\n            if (request.status === httpStatus.OK) {\n                localStorage.setItem(\"token\", request.data.token);\n                router(\"/home\")\n            }\n        } catch (err) {\n            throw err;\n        }\n    }\n\n    const getHistoryOfUser = async () => {\n        try {\n            let request = await client.get(\"/get_all_activity\", {\n                params: {\n                    token: localStorage.getItem(\"token\")\n                }\n            });\n            return request.data\n        } catch\n         (err) {\n            throw err;\n        }\n    }\n\n    const addToUserHistory = async (meetingCode) => {\n        try {\n            let request = await client.post(\"/add_to_activity\", {\n                token: localStorage.getItem(\"token\"),\n                meeting_code: meetingCode\n            });\n            return request\n        } catch (e) {\n            throw e;\n        }\n    }\n\n\n    const data = {\n        userData, setUserData, addToUserHistory, getHistoryOfUser, handleRegister, handleLogin\n    }\n\n    return (\n        <AuthContext.Provider value={data}>\n            {children}\n        </AuthContext.Provider>\n    )\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}